<!DOCTYPE html>
<html lang="fr" prefix="og: http://ogp.me/ns#">
<head>
  <meta charset="UTF-8" />
  <title>Firefox comme navigateur par défaut de SailfishOS | Aldevar - Le Blog</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i,600,600i%7CSource+Code+Pro:400,400i,600" />
  <link rel="stylesheet" href="https://blog.devarieux.net/static/m-dark.css" />
  <link rel="canonical" href="https://blog.devarieux.net/2015/08/firefox-comme-navigateur-par-defaut-de-sailfishos.html" />
  <link href="https://blog.devarieux.net/feed/atom.xml" type="application/atom+xml" rel="alternate" title="Aldevar - Le Blog" />
  <link href="https://blog.devarieux.net/feed/tech.atom.xml" type="application/atom+xml" rel="alternate" title="Aldevar - Le Blog | Tech" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#22272e" />
  <meta property="og:site_name" content="Aldevar - Le Blog" />
  <meta property="og:title" content="Firefox comme navigateur par défaut de SailfishOS" />
  <meta name="twitter:title" content="Firefox comme navigateur par défaut de SailfishOS" />
  <meta property="og:url" content="https://blog.devarieux.net/2015/08/firefox-comme-navigateur-par-defaut-de-sailfishos.html" />
  <meta property="og:description" content="Jolla et son SailfishOS sont vraiment de beaux outils mais il faut avouer qu&#39;ils ont quand même un problème majeur, c&#39;est la piètre qualité des navigateurs intégrés et surtout du navigateur par défaut. Malheureusement, l&#39;interface ne propose actuellement aucune option pour modifier ce comportement. Ainsi, lorsqu&#39;on clique sur un lien …" />
  <meta name="twitter:description" content="Jolla et son SailfishOS sont vraiment de beaux outils mais il faut avouer qu&#39;ils ont quand même un problème majeur, c&#39;est la piètre qualité des navigateurs intégrés et surtout du navigateur par défaut. Malheureusement, l&#39;interface ne propose actuellement aucune option pour modifier ce comportement. Ainsi, lorsqu&#39;on clique sur un lien …" />
  <meta name="twitter:card" content="summary" />
  <meta property="og:type" content="article" />
</head>
<body>
<header><nav id="navigation">
  <div class="m-container">
    <div class="m-row">
      <a href="../../" id="m-navbar-brand" class="m-col-t-9 m-col-m-none m-left-m">ADX</a>
      <a id="m-navbar-show" href="#navigation" title="Show navigation" class="m-col-t-3 m-hide-m m-text-right"></a>
      <a id="m-navbar-hide" href="#" title="Hide navigation" class="m-col-t-3 m-hide-m m-text-right"></a>
      <div id="m-navbar-collapse" class="m-col-t-12 m-show-m m-col-m-none m-right-m">
        <div class="m-row">
          <ol class="m-col-t-12 m-col-m-none">
            <li><a href="https://blog.devarieux.net/pages/about/">About</a></li>
            <li><a href="https://twitter.com/landvarx">Twitter</a></li>
            <li><a href="https://www.linkedin.com/in/alain-devarieux/">LinkedIn</a></li>
            <li><a href="https://noc.social/@Landvarx">Mastodon</a></li>
          </ol>
        </div>
      </div>
    </div>
  </div>
</nav></header>
<main>
<div class="m-container">
  <div class="m-row">
    <article class="m-col-m-10 m-nopadb">
      <header>
        <h1><a href="https://blog.devarieux.net/2015/08/firefox-comme-navigateur-par-defaut-de-sailfishos.html" rel="bookmark" title="Permalink to Firefox comme navigateur par défaut de SailfishOS">
          <time class="m-date" datetime="2015-08-24T09:17:00+02:00">
            Aug <span class="m-date-day">24</span> 2015
          </time>
          Firefox comme navigateur par défaut de SailfishOS
        </a></h1>
        <p>Jolla et son SailfishOS sont vraiment de beaux outils mais il faut
        avouer qu'ils ont quand même un problème majeur, c'est la piètre qualité
        des navigateurs intégrés et surtout du navigateur par défaut.</p>
        <p>Malheureusement, l'interface ne propose actuellement aucune option pour
        modifier ce comportement. Ainsi, lorsqu'on clique sur un lien …</p>
      </header>
      <div class="m-clearfix-l"></div>
<!-- content -->
<p>Jolla et son SailfishOS sont vraiment de beaux outils mais il faut
avouer qu'ils ont quand même un problème majeur, c'est la piètre qualité
des navigateurs intégrés et surtout du navigateur par défaut.</p>
<p>Malheureusement, l'interface ne propose actuellement aucune option pour
modifier ce comportement. Ainsi, lorsqu'on clique sur un lien dans une
autre application c'est forcement ce navigateur tout moisi qui s'ouvre
et qui met 3 heures à charger la page. Heureusement, avec quelques
bidouille, il est possible de paramétrer Firefox comme navigateur par
défaut, c'est d'ailleurs ce que je viens de faire :)</p>
<p>Si vous avez déjà Firefox d'installé, vous pouvez directement vous
rendre au paragraphe 'Paramétrage d'ADB'.</p>
<section id="installation-d-aptoide">
<h2>Installation d'Aptoide</h2>
<p>La première étape est d'installer le market Aptoide si ce n'est pas déjà
fait. Pour cela, il faut se rendre dans la Boutique Jolla, puis dans
'Place de marché' tout en bas et installer le market Aptoide Appstore</p>
</section>
<section id="installation-de-firefox">
<h2>Installation de Firefox</h2>
<p>L'installation de Firefox se fait via Aptoide, il faut donc ouvrir
l'application nouvellement installée et dans la zone de recherche, taper
Firefox. Il faut ensuite trouver l'application <strong>Firefox Browser for
Android</strong> et l'installer.</p>
</section>
<section id="parametrage-d-adb">
<h2>Paramétrage d'ADB</h2>
<p>C'est partie pour le bricolage. Il faut d'abord <a href="http://blog.devarieux.net/2015/03/se-connecter-en-ssh-a-son-jolla/">se connecter en
SSH</a>
à l'appareil afin d'y modifier le comportement d'Alien. Pour cela, il
faut éditer le fichier /opt/alien/system/build.prop et ajouter à la fin
:</p>
<pre>persist.service.adb.enable=1
service.adb.tcp.port=5555</pre>
<p>Une fois cette modification faite, on relance Alien Dalvik</p>
<pre>[root&#64;Jolla ~]# systemctl restart aliendalvik.service</pre>
<p>Maintenant, un process adb doit apparaitre</p>
<pre>[root&#64;Jolla ~]# ps aux | grep adb
 shell     5162  0.0  0.0   6532    92 ?        Ssl  23:04   0:00 /system/root/sbin/adbd
 root      5592  0.0  0.0   3984   288 pts/0    Sl   23:06   0:00 adb fork-server server
 root      7330  0.0  0.0   2256   544 pts/0    S+   23:57   0:00 grep adb</pre>
<pre>[root&#64;Jolla ~]# lsof -p 5162 | grep android_adb
 adbd    5162 shell   10u   CHR      10,25      0t0  1437 /opt/alien/dev/android_adb</pre>
<p>Une fois que tout ça est ok, on lance en root :</p>
<pre>[root&#64;localhost bin]# /opt/alien/system/bin/adb kill-server
[root&#64;localhost bin]# /opt/alien/system/bin/adb devices
* daemon not running. starting it now on port 5038 *
* daemon started successfully *
List of devices attached
emulator-5554   device

[root&#64;localhost bin]#</pre>
</section>
<section id="parametrage-de-sailfishos">
<h2>Paramétrage de SailfishOS</h2>
<p>La système est maintenant prêt à accueillir nos modifications. Toujours
dans la connexion SSH, se rendre dans /usr/share/applications, faire une
copie de sauvegarde du fichier open-url.desktop et le modifier pour
qu'il ne prenne plus en charge les types MIME http et https</p>
<pre>cd /usr/share/applications
cp -a open-url.desktop open-url.desktop.ori
vi open-url.desktop</pre>
<p>Une fois dans le fichier, on supprime la ligne</p>
<pre class="code">MimeType=text/html;x-maemo-urischeme/http;x-maemo-urischeme/https;</pre>
<p>Le fichier doit maintenant ressembler à cela</p>
<pre>[root&#64;Jolla applications]# cat open-url.desktop
[Desktop Entry]
Type=Application
Name=Browser
NotShowIn=X-MeeGo;
X-MeeGo-Logical-Id=sailfish-browser-ap-name
X-MeeGo-Translation-Catalog=sailfish-browser
X-Maemo-Service=org.sailfishos.browser
X-Maemo-Method=org.sailfishos.browser.openUrl</pre>
<p>Créer ensuite le fichier firefox-as-default.desktop et y mettre ce
contenu</p>
<pre>[Desktop Entry]
Type=Application
Name=Browser
NotShowIn=X-MeeGo;
X-MeeGo-Logical-Id=sailfish-browser-ap-name
X-MeeGo-Translation-Catalog=sailfish-browser
X-Maemo-Service=org.sailfishos.browser
X-Maemo-Method=org.sailfishos.browser.openUrl
[root&#64;Jolla applications]# cat firefox-as-default.desktop
[Desktop Entry]
Exec=/opt/alien/system/bin/adb -e shell am start -a android.intent.action.VIEW -n org.mozilla.firefox/.App -d ' %U'
Name=Firefox HTTP handler (opener)
Type=Application
MimeType=text/html;x-maemo-urischeme/http;x-maemo-urischeme/https;
X-Nemo-Application-Type=no-invoker
X-Nemo-Single-Instance=no
X-apkd-apkfile=/data/app/org.mozilla.firefox.apk
NoDisplay=true</pre>
<p>Afin de prendre ces modifications en compte, on met à jour le cache des
types MIME</p>
<pre>[root&#64;Jolla applications]# update-desktop-database</pre>
<p>Le fichier mimeinfo.cache devrait maintenant contenir 2 lignes de ce
type</p>
<pre>x-maemo-urischeme/http=firefox-as-default.desktop;
x-maemo-urischeme/https=firefox-as-default.desktop;</pre>
<p>Dorénavant, lorsqu'un lien sera cliqué dans une application (message,
twitter...) celui s'ouvrir avec Firefox.</p>
</section>
<!-- /content -->
      <footer>
        <p>Posted by <a href="https://blog.devarieux.net/author/aldevar.html">Aldevar</a> on <time datetime="2015-08-24T09:17:00+02:00">Mon 24 August 2015</time> in <a href="https://blog.devarieux.net/category/tech.html">Tech</a>.</p>
      </footer>
    </article>
    <nav class="m-navpanel m-col-m-2">
      <h3>Categories</h3>
      <ol class="m-block-bar-m">
        <li><a href="https://blog.devarieux.net/category/cyber.html">Cyber</a></li>
        <li><a href="https://blog.devarieux.net/category/humeur.html">Humeur</a></li>
        <li><a href="https://blog.devarieux.net/category/none.html">None</a></li>
        <li><a href="https://blog.devarieux.net/category/reseau.html">Réseau</a></li>
        <li><a href="https://blog.devarieux.net/category/supervision.html">Supervision</a></li>
        <li><a href="https://blog.devarieux.net/category/sysadmin.html">Sysadmin</a></li>
        <li><a href="https://blog.devarieux.net/category/tech.html">Tech</a></li>
      </ol>
    </nav>
  </div>
</div>
</main>
<footer><nav>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <p>Aldevar - Le Blog. Powered by <a href="https://getpelican.com">Pelican</a> and <a href="https://mcss.mosra.cz">m.css</a>.</p>
      </div>
    </div>
  </div>
</nav></footer>
</body>
</html>